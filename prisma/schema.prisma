// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema


generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id                  Int     @id @default(autoincrement())
  name                String?
  dashboards          Dashboard[] @relation("UserDashboards")
  primaryDash         Dashboard? @relation("PrimaryDash", fields: [primaryDashId], references: [id])
  primaryDashId       Int? @unique
  credentialProvider  String
  credentialSubject   Int
}

model Dashboard {
  id         Int     @id @default(autoincrement())
  name       String
  owner      User    @relation("UserDashboards", fields: [ownerId], references: [id])
  ownerId    Int
  theme      Theme @relation(fields: [themeId], references: [id])
  themeId    Int @unique
  layout     Layout   @relation(fields: [layoutId], references: [id])
  layoutId   Int
  primaryOf  User?    @relation("PrimaryDash")
}

model Theme {
  id        Int     @id @default(autoincrement())
  usedBy    Dashboard?
  public    Boolean
  navColor  String
  bgColor   String
  font      String
}

model Layout {
  id Int  @id @default(autoincrement())
  public    Boolean
  gridSize  String
}

model LayoutElement {
  id Int  @id @default(autoincrement())
  layout     Layout   @relation(fields: [layoutId], references: [id])
  layoutId   Int
  widget     Widget   @relation(fields: [widgetId], references: [id])
  widgetId   Int
  posX       Int
  posY       Int
  sizeX      Int
  sizeY      Int
}

model Widget {
  id Int  @id @default(autoincrement())
  name       String
}
